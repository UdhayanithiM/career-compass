(()=>{"use strict";({932:function(){var e=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function c(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,c)}l((o=o.apply(e,t||[])).next())})};function t(e){var t,r;const o=document.activeElement;if(o&&(o.isContentEditable||"TEXTAREA"===o.tagName||"INPUT"===o.tagName)){const i=null!==(t=o.selectionStart)&&void 0!==t?t:0,n=null!==(r=o.selectionEnd)&&void 0!==r?r:0;o.value=o.value.substring(0,i)+e+o.value.substring(n)}else alert(`AI Suggestion:\n\n${e}`)}function r(e,t){chrome.notifications.create({type:"basic",iconUrl:"images/icon128.png",title:e,message:t})}chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"proofread-text",title:"Proofread with FortiTwin AI",contexts:["selection"]}),chrome.contextMenus.create({id:"rewrite-text-formal",title:"Rewrite Formally",contexts:["selection"]})}),chrome.contextMenus.onClicked.addListener((o,i)=>e(void 0,void 0,void 0,function*(){if(!(null==i?void 0:i.id)||!o.selectionText)return;const e=o.selectionText;if("proofread-text"===o.menuItemId)try{if(!self.Proofreader)throw new Error("Proofreader API is not supported.");const o=yield Proofreader.availability();if("available"===o){const o=yield Proofreader.create(),n=yield o.proofread(e);if(console.log("Raw Proofreader API Result:",n),n&&n.correctedInput&&n.correctedInput!==e){const e=String(n.correctedInput);chrome.scripting.executeScript({target:{tabId:i.id},func:t,args:[e]})}else r("FortiTwin AI","No grammar suggestions found.")}else{if("downloadable"!==o)throw new Error(`Proofreader is not ready. Status: ${o}`);r("FortiTwin AI is Getting Ready","Downloading the AI model. Please try again shortly."),Proofreader.create()}}catch(e){console.error("FortiTwin AI Error:",e)}else if("rewrite-text-formal"===o.menuItemId)try{if(!self.Rewriter)throw new Error("Rewriter API is not supported.");const o=yield Rewriter.availability();if("available"===o){const r=yield Rewriter.create(),o=yield r.rewrite(e,{tone:"more-formal"}),n=String(o);chrome.scripting.executeScript({target:{tabId:i.id},func:t,args:[n]})}else{if("downloadable"!==o)throw new Error(`Rewriter is not ready. Status: ${o}`);r("FortiTwin AI is Getting Ready","Downloading the AI model. Please try again shortly."),Rewriter.create()}}catch(e){console.error("FortiTwin AI Error:",e)}}))}})[932]()})();